{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","duckshooter/images/bg.jpg","duckshooter/images/grass.png","duckshooter/images/tree.png","duckshooter/images/gun_lens.png","duckshooter/images/blast.png","duckshooter/images/duck_1.png","duckshooter/images/duck_2.png","duckshooter/images/duck_3.png","duckshooter/images/duck_4.png","duckshooter/sounds/ds_shot.ogg","duckshooter/sounds/ds_duck_hit.ogg","duckshooter/source.ts","duckshooter/utils.ts","duckshooter/DuckShooter.ts","duckshooter/index.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"],"names":["_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_arrayWithHoles","arr","Array","isArray","_nonIterableRest","TypeError","_slicedToArray","i","arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","nonIterableRest","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","loadImages","a","Promise","all","loadImage","bg","grass","tree","gun_lens","blast","duck_1","duck_2","duck_3","duck_4","BG","GRASS","TREE","GUN_LENS","BLAST","DUCK_1","DUCK_2","DUCK_3","DUCK_4","url","resolve","reject","image","Image","src","onload","onerror","SOUNDS","DS_SHOT","DS_DUCK_HIT","Utils","audio","document","createElement","volume","autoplay","this","ins","Duck","canvasWidth","canvasHeight","id","now","Math","random","x","y","width","height","direction","type","liveProgress","livePosition","deadProgress","deadPosition","speedX","speedY","invalid","dead","maxX","n","getDirectionX","center","playAudio","updateDeadProgress","updateLiveProgress","move","nextProgress","GunLens","speed","fireProgress","firePosition","fireing","ducks","forEach","duck","getCenterBox","b","collide","updateDead","cond1","cond2","cx","abs","cy","nextX","nextY","DuckShooter","root","canvas","ctx","images","keydowns","gunLens","suspend","onKeyDown","evt","keyDownHandle","onKeyUp","render","update","clearCanvas","draw","requestAnimationFrame","drawScene","getScale","scaleX","scaleY","treeWidth","naturalWidth","treeHeight","naturalHeight","grassWidth","grassHeight","grassY","treeY","drawImage","createCanvas","appendChild","getCanvasSize","window","addEventListener","setup","getContext","style","border","rootRect","getBoundingClientRect","removeEventListener","code","preventDefault","fired","generateDuck","switchSuspend","duckCount","drawGunLens","drawDuck","duckmap","save","scale","translate","restore","checkKeydowns","updateFireProgress","filter","d","keys","moveLeft","moveRight","moveTop","moveBottom","clearRect","firemap","DuckShooterGraph","divRef","createRef","game","div","current","close","ref","background","textAlign","PureComponent","_inherits","subClass","superClass","create","constructor","_typeof","obj","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","result","Super","getPrototypeOf","NewTarget","arguments","apply","_getPrototypeOf"],"mappings":"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","file":"static/js/12.ccd1d84b.chunk.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default __webpack_public_path__ + \"static/media/bg.e4e8e136.jpg\";","export default __webpack_public_path__ + \"static/media/grass.1eb6d96a.png\";","export default __webpack_public_path__ + \"static/media/tree.59acd441.png\";","export default __webpack_public_path__ + \"static/media/gun_lens.03cde218.png\";","export default __webpack_public_path__ + \"static/media/blast.cfe08dab.png\";","export default __webpack_public_path__ + \"static/media/duck_1.107a591a.png\";","export default __webpack_public_path__ + \"static/media/duck_2.27f84f10.png\";","export default __webpack_public_path__ + \"static/media/duck_3.0e93dab9.png\";","export default __webpack_public_path__ + \"static/media/duck_4.aa120666.png\";","export default __webpack_public_path__ + \"static/media/ds_shot.94309abe.ogg\";","export default __webpack_public_path__ + \"static/media/ds_duck_hit.e416f1e5.ogg\";","import bg from './images/bg.jpg'\r\nimport grass from './images/grass.png'\r\nimport tree from './images/tree.png'\r\nimport gun_lens from './images/gun_lens.png'\r\nimport blast from './images/blast.png'\r\nimport duck_1 from './images/duck_1.png'\r\nimport duck_2 from './images/duck_2.png'\r\nimport duck_3 from './images/duck_3.png'\r\nimport duck_4 from './images/duck_4.png'\r\n\r\nimport DS_SHOT from './sounds/ds_shot.ogg'\r\nimport DS_DUCK_HIT from './sounds/ds_duck_hit.ogg'\r\n\r\nexport interface Images {\r\n  [key: string]: HTMLImageElement\r\n}\r\n\r\nexport async function loadImages() {\r\n  const [\r\n    BG,\r\n    GRASS,\r\n    TREE,\r\n    GUN_LENS,\r\n    BLAST,\r\n    DUCK_1,\r\n    DUCK_2,\r\n    DUCK_3,\r\n    DUCK_4,\r\n  ] = await Promise.all([\r\n    loadImage(bg),\r\n    loadImage(grass),\r\n    loadImage(tree),\r\n    loadImage(gun_lens),\r\n    loadImage(blast),\r\n    loadImage(duck_1),\r\n    loadImage(duck_2),\r\n    loadImage(duck_3),\r\n    loadImage(duck_4),\r\n  ])\r\n  return {\r\n    BG,\r\n    GRASS,\r\n    TREE,\r\n    GUN_LENS,\r\n    BLAST,\r\n    DUCK_1,\r\n    DUCK_2,\r\n    DUCK_3,\r\n    DUCK_4,\r\n  }\r\n}\r\n\r\nconst loadImage = (url: string) => new Promise<HTMLImageElement>((resolve, reject) => {\r\n  const image = new Image()\r\n  image.src = url\r\n  image.onload = () => {\r\n    resolve(image)\r\n  }\r\n  image.onerror = err => {\r\n    reject(err)\r\n  }\r\n})\r\n\r\nexport const SOUNDS = {\r\n  DS_SHOT,\r\n  DS_DUCK_HIT\r\n}","export default class Utils {\r\n  private static ins: Utils | null = null\r\n  private constructor() { }\r\n  static get instance() {\r\n    if (!this.ins) {\r\n      this.ins = new Utils()\r\n    }\r\n    return this.ins\r\n  }\r\n  loadImage(url: string, call: (image: HTMLImageElement) => void) {\r\n    const image = new Image()\r\n    image.src = url\r\n    image.onload = () => {\r\n      call(image)\r\n    }\r\n  }\r\n  playAudio(url: string) {\r\n    const audio = document.createElement('audio')\r\n    audio.volume = 0.3\r\n    audio.src = url\r\n    audio.autoplay = true\r\n  }\r\n}\r\n","import { loadImages, Images, SOUNDS } from './source'\r\nimport Utils from './utils'\r\n\r\ninterface Rect {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n}\r\n/**\r\n * 鸭子\r\n */\r\nclass Duck implements Rect {\r\n  id = Date.now() + Math.random()\r\n  x = 0\r\n  y = 0\r\n  width = 200\r\n  height = 200\r\n  direction: 0 | 1 = 0 //是否水平翻转渲染\r\n  type: 1 | 2 | 3 | 4 = 1 //鸭子图片类型\r\n  liveProgress = 0 //活着画面进度 0 - 7\r\n  livePosition = [\r\n    [0, 0], [200, 0], [400, 0], [600, 0],\r\n    [800, 0], [1000, 0], [1200, 0], [1400, 0]\r\n  ]\r\n  deadProgress = 0 //死亡画面进度 0 - 36\r\n  deadPosition = [\r\n    [1600, 0],\r\n    [0, 200], [200, 200], [400, 200], [600, 200], [800, 200], [1000, 200], [1200, 200], [1400, 200], [1600, 200],\r\n    [0, 400], [200, 400], [400, 400], [600, 400], [800, 400], [1000, 400], [1200, 400], [1400, 400], [1600, 400],\r\n    [0, 600], [200, 600], [400, 600], [600, 600], [800, 600], [1000, 600], [1200, 600], [1400, 600], [1600, 600],\r\n    [0, 800], [200, 800], [400, 800], [600, 800], [800, 800], [1000, 800], [1200, 800], [1400, 800], [1600, 800],\r\n  ]\r\n  speedX = Math.random() * 4\r\n  speedY = Math.random() * 4\r\n  invalid = false // 超出边界\r\n  dead = false // 击中死亡\r\n  constructor(public canvasWidth: number, public canvasHeight: number) {\r\n    //初始化方位\r\n    this.direction = ~~(Math.random() * 2) as 0 | 1\r\n    //初始化位置 朝左的右半场 反之左半场\r\n    const maxX = canvasWidth - this.width\r\n    this.x = (maxX / 2) * Math.random() + (maxX / 2)\r\n    this.y = canvasHeight - this.height * 2\r\n    //初始化鸭子类型\r\n    this.type = ~~(Math.random() * 4) + 1 as 1 | 2 | 3 | 4\r\n  }\r\n  //以鸭子中心，取n*n的矩形\r\n  getCenterBox(n: number): Rect {\r\n    let { x, y } = this\r\n    if (this.direction) {\r\n      x = this.getDirectionX()\r\n    }\r\n    const center = [x + this.width / 2, y + this.height / 2]\r\n    return { x: center[0] - n / 2, y: center[1] - n / 2, width: n, height: n }\r\n  }\r\n  //水平翻转后，鸭子的实际x坐标\r\n  getDirectionX() {\r\n    return (this.canvasWidth / 2) - (this.x + this.width - (this.canvasWidth / 2))\r\n  }\r\n  updateDead() {\r\n    this.dead = true\r\n    //播放死亡音频\r\n    Utils.instance.playAudio(SOUNDS.DS_DUCK_HIT)\r\n  }\r\n  move() {\r\n    if (this.dead) {\r\n      this.y += 6\r\n    } else {\r\n      this.x -= this.speedX\r\n      this.y -= this.speedY\r\n    }\r\n    //判定 鸭子是否超出边界\r\n    if (\r\n      this.x < 0 - this.width || this.y < 0 - this.height || this.y > this.canvasHeight\r\n    ) {\r\n      this.invalid = true\r\n    }\r\n  }\r\n  update() {\r\n    if (this.dead) {\r\n      this.updateDeadProgress()\r\n    } else {\r\n      this.updateLiveProgress()\r\n    }\r\n    this.move()\r\n  }\r\n  updateDeadProgress() {\r\n    let nextProgress = this.deadProgress + 1\r\n    nextProgress = nextProgress > 36 ? 36 : nextProgress\r\n    this.deadProgress = nextProgress\r\n  }\r\n  updateLiveProgress() {\r\n    let nextProgress = this.liveProgress + 1\r\n    nextProgress = nextProgress > 7 ? 0 : nextProgress\r\n    this.liveProgress = nextProgress\r\n  }\r\n}\r\n\r\n/**\r\n * 枪镜头\r\n */\r\nclass GunLens implements Rect {\r\n  x = 0\r\n  y = 0\r\n  width = 150\r\n  height = 150\r\n  speed = 10\r\n  fireProgress = 24 //开火进度 0 - 24\r\n  firePosition = [ //开火图片定位\r\n    [0, 0], [200, 0], [400, 0], [600, 0], [800, 0],\r\n    [0, 200], [200, 200], [400, 200], [600, 200], [800, 200],\r\n    [0, 400], [200, 400], [400, 400], [600, 400], [800, 400],\r\n    [0, 600], [200, 600], [400, 600], [600, 600], [800, 600],\r\n    [0, 800], [200, 800], [400, 800], [600, 800], [800, 800]\r\n  ]\r\n  fireing = false //开火状态\r\n  constructor(public canvasWidth: number, public canvasHeight: number) { }\r\n  updateFireProgress() {\r\n    let nextProgress = this.fireProgress + 1\r\n    if (nextProgress > 24) {\r\n      nextProgress = 24\r\n      this.fireing = false\r\n    }\r\n    this.fireProgress = nextProgress\r\n  }\r\n  //以镜头中心，取n*n的矩形\r\n  getCenterBox(n: number): Rect {\r\n    const center = [this.x + this.width / 2, this.y + this.height / 2]\r\n    return { x: center[0] - n / 2, y: center[1] - n / 2, width: n, height: n }\r\n  }\r\n  fired(ducks: Duck[]) {\r\n    this.fireing = true\r\n    this.fireProgress = 0\r\n    Utils.instance.playAudio(SOUNDS.DS_SHOT)\r\n    //判定是否击中鸭子\r\n    ducks.forEach(duck => {\r\n      const a = this.getCenterBox(10)\r\n      const b = duck.getCenterBox(100)\r\n      if (this.collide(a, b)) {\r\n        duck.updateDead()\r\n      }\r\n    })\r\n  }\r\n  collide(a: Rect, b: Rect) {\r\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\r\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\r\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\r\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\r\n    const cx = Math.abs(cond1[0] - cond2[0])\r\n    const cy = Math.abs(cond1[1] - cond2[1])\r\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  moveLeft() {\r\n    let nextX = this.x - this.speed\r\n    if (nextX < 0) nextX = 0\r\n    this.x = nextX\r\n  }\r\n  moveRight() {\r\n    let nextX = this.x + this.speed\r\n    if (nextX > this.canvasWidth - this.width) nextX = this.canvasWidth - this.width\r\n    this.x = nextX\r\n  }\r\n  moveTop() {\r\n    let nextY = this.y - this.speed\r\n    if (nextY < 0) nextY = 0\r\n    this.y = nextY\r\n  }\r\n  moveBottom() {\r\n    let nextY = this.y + this.speed\r\n    if (nextY > this.canvasHeight - this.height) nextY = this.canvasHeight - this.height\r\n    this.y = nextY\r\n  }\r\n}\r\n/**\r\n * 鸭子射手\r\n */\r\nexport class DuckShooter {\r\n  canvas: HTMLCanvasElement\r\n  ctx: CanvasRenderingContext2D\r\n  width: number\r\n  height: number\r\n  images: Images = {}\r\n  keydowns: { [key: string]: boolean } = {}\r\n  gunLens: GunLens\r\n  ducks: Duck[] = []\r\n  suspend = false\r\n  constructor(public root: HTMLDivElement) {\r\n    const { canvas, ctx } = this.createCanvas()\r\n    this.canvas = canvas\r\n    this.ctx = ctx\r\n    root.appendChild(this.canvas)\r\n    const { width, height } = this.getCanvasSize()\r\n    this.canvas.width = width\r\n    this.canvas.height = height\r\n    this.width = width\r\n    this.height = height\r\n    this.gunLens = new GunLens(this.width, this.height)\r\n    window.addEventListener('keydown', this.onKeyDown)\r\n    window.addEventListener('keyup', this.onKeyUp)\r\n    this.setup()\r\n  }\r\n  createCanvas(): { canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D } {\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d')!\r\n    canvas.style.border = '1px solid'\r\n    return { canvas, ctx }\r\n  }\r\n  getCanvasSize(): { width: number, height: number } {\r\n    const rootRect = this.root.getBoundingClientRect()\r\n    this.canvas.height = rootRect.height\r\n    let width = rootRect.height * 1.3\r\n    width = width > rootRect.width ? rootRect.width : width\r\n    return { width, height: rootRect.height }\r\n  }\r\n  close() {\r\n    window.removeEventListener('keydown', this.onKeyDown)\r\n    window.removeEventListener('keyup', this.onKeyUp)\r\n  }\r\n  keyDownHandle(evt: KeyboardEvent) {\r\n    switch (evt.code) {\r\n      case 'Space':\r\n        evt.preventDefault()\r\n        this.gunLens.fired(this.ducks)\r\n        return\r\n      case 'KeyG':\r\n        //生成鸭子\r\n        this.generateDuck()\r\n        return\r\n      case 'KeyX':\r\n        this.switchSuspend()\r\n        return\r\n      default:\r\n    }\r\n  }\r\n  switchSuspend() {\r\n    this.suspend = !this.suspend\r\n    if (!this.suspend) {\r\n      requestAnimationFrame(this.render)\r\n    }\r\n  }\r\n  generateDuck() {\r\n    //一次创建 1 ～ 2 只鸭子\r\n    const duckCount = ~~(Math.random() * 2) + 1\r\n    for (let i = 0; i < duckCount; i++) {\r\n      const duck = new Duck(this.width, this.height)\r\n      this.ducks.push(duck)\r\n    }\r\n  }\r\n  onKeyDown = (evt: KeyboardEvent) => {\r\n    this.keydowns[evt.key] = true\r\n    this.keyDownHandle(evt)\r\n  }\r\n  onKeyUp = (evt: KeyboardEvent) => {\r\n    this.keydowns[evt.key] = false\r\n  }\r\n  async setup() {\r\n    //加载图片数据\r\n    this.images = await loadImages()\r\n    this.render()\r\n  }\r\n  render = () => {\r\n    this.update()\r\n    this.clearCanvas()\r\n    this.draw()\r\n    if (!this.suspend) requestAnimationFrame(this.render)\r\n  }\r\n  draw() {\r\n    this.drawScene()\r\n    this.drawGunLens()\r\n    this.drawDuck()\r\n  }\r\n  drawDuck() {\r\n    this.ducks.forEach(duck => {\r\n      let key = 'DUCK_' + duck.type\r\n      const image = this.images[key]\r\n      const duckmap = duck.dead ? duck.deadPosition[duck.deadProgress] : duck.livePosition[duck.liveProgress]\r\n      const { width, height } = duck\r\n      this.ctx.save()\r\n      if (duck.direction) {\r\n        this.ctx.scale(-1, 1)\r\n        this.ctx.translate(-this.width, 0)\r\n      }\r\n      this.ctx.drawImage(image, duckmap[0], duckmap[1], width, height, duck.x, duck.y, width, height)\r\n      this.ctx.restore()\r\n    })\r\n  }\r\n  update() {\r\n    //更新按键操作\r\n    this.checkKeydowns()\r\n    //更新开火进度\r\n    if (this.gunLens.fireing) {\r\n      this.gunLens.updateFireProgress()\r\n    }\r\n    //更新鸭子飞行状态\r\n    this.ducks.forEach(duck => duck.update())\r\n    //删除无效的鸭子\r\n    this.ducks = this.ducks.filter(d => !d.invalid)\r\n  }\r\n  checkKeydowns() {\r\n    Object.keys(this.keydowns).forEach(key => {\r\n      if (!this.keydowns[key]) return\r\n      switch (key) {\r\n        case 'a':\r\n          return this.gunLens.moveLeft()\r\n        case 'd':\r\n          return this.gunLens.moveRight()\r\n        case 'w':\r\n          return this.gunLens.moveTop()\r\n        case 's':\r\n          return this.gunLens.moveBottom()\r\n        default:\r\n      }\r\n    })\r\n  }\r\n  clearCanvas() {\r\n    this.ctx.clearRect(0, 0, this.width, this.height)\r\n  }\r\n  //计算缩放比例\r\n  getScale() {\r\n    const { BG } = this.images\r\n    const { naturalWidth, naturalHeight } = BG\r\n    return { scaleX: this.width / naturalWidth, scaleY: this.height / naturalHeight }\r\n  }\r\n  drawScene = () => {\r\n    const { BG, GRASS, TREE } = this.images\r\n    const { scaleX, scaleY } = this.getScale()\r\n    const [treeWidth, treeHeight] = [\r\n      TREE.naturalWidth * scaleX, TREE.naturalHeight * scaleY\r\n    ]\r\n    const [grassWidth, grassHeight] = [\r\n      this.width, (this.width / GRASS.naturalWidth) * GRASS.naturalHeight\r\n    ]\r\n    const [grassX, grassY] = [0, this.height - grassHeight]\r\n    const [treeX, treeY] = [0, this.height - treeHeight - grassHeight / 2]\r\n    this.ctx.drawImage(BG, 0, 0, this.width, this.height)\r\n    this.ctx.drawImage(TREE, treeX, treeY, treeWidth, treeHeight)\r\n    this.ctx.drawImage(GRASS, grassX, grassY, grassWidth, grassHeight)\r\n  }\r\n  drawGunLens() {\r\n    const { GUN_LENS, BLAST } = this.images\r\n    this.ctx.drawImage(GUN_LENS, this.gunLens.x, this.gunLens.y, this.gunLens.width, this.gunLens.height)\r\n    if (!this.gunLens.fireing) return\r\n    const firemap = this.gunLens.firePosition[this.gunLens.fireProgress]\r\n    this.ctx.drawImage(BLAST, firemap[0], firemap[1], 200, 200, this.gunLens.x - 25, this.gunLens.y - 25, 200, 200)\r\n  }\r\n}","import { createRef, PureComponent } from \"react\";\r\nimport { DuckShooter } from \"./DuckShooter\";\r\n\r\nexport default class DuckShooterGraph extends PureComponent {\r\n  divRef = createRef<HTMLDivElement>()\r\n  game: DuckShooter | null = null\r\n  componentDidMount() {\r\n    const div = this.divRef.current!\r\n    this.game = new DuckShooter(div)\r\n  }\r\n  componentWillUnmount() {\r\n    this.game!.close()\r\n  }\r\n  render() {\r\n    return (\r\n      <div\r\n        ref={this.divRef}\r\n        style={{\r\n          background: '#fff', width: '100vw',\r\n          height: '100vh', textAlign: 'center'\r\n        }}>\r\n      </div>\r\n    )\r\n  }\r\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}"],"sourceRoot":""}