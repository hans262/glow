{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","game/BallGameGraph.tsx","game/index.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"],"names":["_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","Block","x","y","width","height","alive","lifes","this","b","a","cond1","cond2","cx","Math","abs","cy","Paddle","canvasWidth","speed","nextX","Ball","canvasHeight","speedX","speedY","fired","lastBump","reboundX","reboundY","BallGame","root","canvas","ctx","keydowns","actions","blocks","status","ball","paddle","levels","onKeyDown","evt","suspend","n","parseInt","isNaN","switchLevel","forEach","l","block","push","onKeyUp","frameLoop","update","clearCanvas","drawCanvas","requestAnimationFrame","document","createElement","appendChild","style","border","getContext","window","addEventListener","registerAction","moveLeft","moveRight","removeEventListener","callback","move","collide","kill","filter","drawPaddle","drawBall","drawBlock","fillStyle","fillRect","clearRect","BallGameGraph","divRef","createRef","game","onCloseClick","close","div","current","padding","ref","onClick","PureComponent","Games","_inherits","subClass","superClass","create","constructor","value","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","result","Super","getPrototypeOf","NewTarget","arguments","apply","_getPrototypeOf"],"mappings":"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","file":"static/js/13.15ca4d47.chunk.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { Button } from \"antd\";\r\nimport { createRef, PureComponent } from \"react\";\r\n\r\n//砖块\r\nclass Block {\r\n  width = 70\r\n  height = 20\r\n  alive = true\r\n  lifes = 2\r\n  constructor(public x: number, public y: number) { }\r\n  kill() {\r\n    this.lifes--\r\n    if (this.lifes < 1) this.alive = false\r\n  }\r\n  collide(b: Ball) {\r\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\r\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\r\n    const a = this\r\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\r\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\r\n    const cx = Math.abs(cond1[0] - cond2[0])\r\n    const cy = Math.abs(cond1[1] - cond2[1])\r\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n}\r\n\r\n//挡板\r\nclass Paddle {\r\n  x: number = 100\r\n  y: number = 350\r\n  width = 300\r\n  height = 30\r\n  speed = 10\r\n  canvasWidth: number\r\n  constructor(canvasWidth: number) {\r\n    this.canvasWidth = canvasWidth\r\n  }\r\n  moveLeft() {\r\n    let nextX = this.x - this.speed\r\n    if (nextX < 0) nextX = 0\r\n    this.x = nextX\r\n  }\r\n  moveRight() {\r\n    let nextX = this.x + this.speed\r\n    if (nextX > this.canvasWidth - this.width) nextX = this.canvasWidth - this.width\r\n    this.x = nextX\r\n  }\r\n  //定义相撞函数\r\n  collide(b: Ball) {\r\n    //两个矩形中心点 x轴距离 <= 两个矩形宽和的一半 &&\r\n    //两个矩形中心点 y轴距离 <= 两个矩形高和的一半\r\n    const a = this\r\n    const cond1 = [a.x + a.width / 2, a.y + a.height / 2]\r\n    const cond2 = [b.x + b.width / 2, b.y + b.height / 2]\r\n    const cx = Math.abs(cond1[0] - cond2[0])\r\n    const cy = Math.abs(cond1[1] - cond2[1])\r\n    if (cx <= (a.width + b.width) / 2 && cy <= (a.height + b.height) / 2) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n}\r\n\r\n//弹球\r\nclass Ball {\r\n  x = 100\r\n  y = 250\r\n  width = 50\r\n  height = 50\r\n  speedX = 3\r\n  speedY = 3\r\n  fired = false //发射开关\r\n  lastBump = false //上一次是否发生相撞\r\n  canvasWidth: number\r\n  canvasHeight: number\r\n  constructor(canvasWidth: number, canvasHeight: number) {\r\n    this.canvasWidth = canvasWidth\r\n    this.canvasHeight = canvasHeight\r\n  }\r\n  move() {\r\n    if (!this.fired) return\r\n    if (this.x < 0 || this.x + this.width > 600) this.reboundX()\r\n    if (this.y < 0 || this.y + this.height > 400) this.reboundY()\r\n    this.x += this.speedX\r\n    this.y += this.speedY\r\n  }\r\n  suspend() {\r\n    this.fired = !this.fired\r\n  }\r\n  reboundY() {\r\n    this.speedY *= -1\r\n  }\r\n  reboundX() {\r\n    this.speedX *= -1\r\n  }\r\n}\r\n\r\nclass BallGame {\r\n  width = 600\r\n  height = 400\r\n  canvas: HTMLCanvasElement\r\n  ctx: CanvasRenderingContext2D\r\n  keydowns: { [key: string]: boolean } = {}\r\n  actions: { [key: string]: () => void } = {}\r\n  blocks: Block[] = []\r\n  status: 'start' | 'end' = 'start'\r\n  ball: Ball\r\n  paddle: Paddle\r\n  levels = [\r\n    [[50, 50,], [150, 120,]],\r\n    [[50, 0,], [100, 100,], [150, 130]],\r\n    [[50, 30,], [100, 100], [200, 100]]\r\n  ]\r\n  constructor(root: Element) {\r\n    this.ball = new Ball(this.width, this.height)\r\n    this.paddle = new Paddle(this.width)\r\n    this.canvas = document.createElement('canvas')\r\n    root.appendChild(this.canvas)\r\n    this.canvas.width = this.width\r\n    this.canvas.height = this.height\r\n    this.canvas.style.border = '1px solid'\r\n    this.ctx = this.canvas.getContext('2d')!\r\n\r\n    window.addEventListener('keydown', this.onKeyDown)\r\n    window.addEventListener('keyup', this.onKeyUp)\r\n\r\n    this.registerAction('a', () => {\r\n      this.paddle.moveLeft()\r\n    })\r\n    this.registerAction('d', () => {\r\n      this.paddle.moveRight()\r\n    })\r\n    this.frameLoop()\r\n  }\r\n\r\n  onKeyDown = (evt: KeyboardEvent) => {\r\n    this.keydowns[evt.key] = true\r\n    if (evt.key === 's') {\r\n      this.ball.suspend()\r\n    }\r\n    const n = parseInt(evt.key)\r\n    if (!isNaN(n)) {\r\n      this.switchLevel(n)\r\n    }\r\n  }\r\n  switchLevel = (n: number) => {\r\n    n -= 1\r\n    this.blocks = []\r\n    this.levels[n]?.forEach(l => {\r\n      const block = new Block(l[0], l[1])\r\n      this.blocks.push(block)\r\n    })\r\n  }\r\n  onKeyUp = (evt: KeyboardEvent) => {\r\n    this.keydowns[evt.key] = false\r\n  }\r\n  close() {\r\n    this.status = 'end'\r\n    window.removeEventListener('keydown', this.onKeyDown)\r\n    window.removeEventListener('keyup', this.onKeyUp)\r\n  }\r\n  registerAction(key: string, callback: () => void) {\r\n    this.actions[key] = callback\r\n  }\r\n  frameLoop = () => {\r\n    //执行按键action\r\n    for (let key in this.keydowns) {\r\n      if (this.keydowns[key]) {\r\n        if (this.actions[key]) this.actions[key]()\r\n      }\r\n    }\r\n    this.update()\r\n    this.clearCanvas()\r\n    this.drawCanvas()\r\n    if (this.status === 'end') return\r\n    //next frame\r\n    requestAnimationFrame(this.frameLoop)\r\n  }\r\n  update() {\r\n    this.ball.move()\r\n    if (this.paddle.collide(this.ball)) {\r\n      //如果上一帧也是被碰撞，下一帧就不改变球的运动方向\r\n      if (!this.ball.lastBump) {\r\n        this.ball.reboundY()\r\n      }\r\n      this.ball.lastBump = true\r\n    } else {\r\n      this.ball.lastBump = false\r\n    }\r\n    this.blocks.forEach(block => {\r\n      if (block.collide(this.ball)) {\r\n        this.ball.reboundY()\r\n        block.kill()\r\n      }\r\n    })\r\n    this.blocks = this.blocks.filter(b => b.alive)\r\n  }\r\n  drawCanvas() {\r\n    this.drawPaddle()\r\n    this.drawBall()\r\n    this.drawBlock()\r\n  }\r\n  drawBlock() {\r\n    this.blocks.forEach(b => {\r\n      this.ctx.fillStyle = 'black'\r\n      this.ctx.fillRect(b.x, b.y, b.width, b.height)\r\n    })\r\n  }\r\n  drawPaddle() {\r\n    this.ctx.fillStyle = 'black'\r\n    this.ctx.fillRect(this.paddle.x, this.paddle.y, this.paddle.width, this.paddle.height)\r\n  }\r\n  drawBall() {\r\n    this.ctx.fillStyle = 'red'\r\n    this.ctx.fillRect(this.ball.x, this.ball.y, this.ball.width, this.ball.height)\r\n  }\r\n  //擦除画板\r\n  clearCanvas() {\r\n    this.ctx.clearRect(0, 0, this.width, this.height)\r\n  }\r\n}\r\n\r\nexport default class BallGameGraph extends PureComponent {\r\n  divRef = createRef<HTMLDivElement>()\r\n  game: BallGame | null = null\r\n  componentDidMount() {\r\n    const div = this.divRef.current!\r\n    this.game = new BallGame(div)\r\n  }\r\n  componentWillUnmount() {\r\n    this.game?.close()\r\n  }\r\n  onCloseClick = () => {\r\n    this.game?.close()\r\n  }\r\n  render() {\r\n    return (\r\n      <div style={{ padding: '30px' }}>\r\n        <div ref={this.divRef} />\r\n        <Button onClick={this.onCloseClick}>CLOSE</Button>\r\n      </div>\r\n    )\r\n  }\r\n}","import BallGameGraph from \"./BallGameGraph\";\r\n\r\nexport default function Games() {\r\n  return (\r\n    <div>\r\n      <BallGameGraph />\r\n    </div>\r\n  )\r\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}"],"sourceRoot":""}